---
import BaseLayout from '../layouts/BaseLayout.astro';
import { sanityClient, type Profile } from '../lib/sanityClient';

const profile = await sanityClient.fetch<Profile>(
  `*[_type == "profile" && _id == "profile"][0] {
    _id,
    email,
    instagramHandle,
    location
  }`
);
---

<BaseLayout title="Contact - Yufang Zhang Ceramics" description="Commission inquiries and sales">
  <main class="min-h-screen bg-gallery-bone text-ink-dark px-8 py-24">
    <div class="max-w-2xl mx-auto text-center">

      <!-- Header -->
      <header class="mb-20">
        <h1 class="text-[11px] uppercase tracking-museum text-zinc-500 mb-8">
          Acquisitions & Inquiries
        </h1>
        <div class="max-w-lg mx-auto">
          <p class="text-sm font-light text-zinc-600 leading-relaxed">
            For inquiries regarding pieces shown in Selected Works, please include the name of the work in your message. To stay updated on new releases or to inquire about available work, please use the form below or send a DM on Instagram.
          </p>
        </div>
      </header>

      <!-- Contact Form -->
      <form
        action={profile?.email ? `https://formspree.io/f/YOUR_FORMSPREE_ID` : '#'}
        method="POST"
        class="space-y-12 text-left"
      >
        <!-- Name Field -->
        <div class="relative">
          <label for="name" class="text-[9px] uppercase tracking-widest text-zinc-400 mb-1 block">
            Name
          </label>
          <input
            type="text"
            id="name"
            name="name"
            class="w-full bg-transparent border-b border-zinc-300 py-3 outline-none focus:border-zinc-800 transition-colors font-light"
            placeholder="Your name"
            required
          />
        </div>

        <!-- Email Field -->
        <div class="relative">
          <label for="email" class="text-[9px] uppercase tracking-widest text-zinc-400 mb-1 block">
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            class="w-full bg-transparent border-b border-zinc-300 py-3 outline-none focus:border-zinc-800 transition-colors font-light"
            placeholder="Email address"
            required
          />
        </div>

        <!-- Inquiry Type -->
        <div class="relative">
          <label for="inquiry-type" class="text-[9px] uppercase tracking-widest text-zinc-400 mb-1 block">
            Inquiry Type
          </label>
          <select
            id="inquiry-type"
            name="inquiry-type"
            class="w-full bg-transparent border-b border-zinc-300 py-3 outline-none focus:border-zinc-800 transition-colors font-light appearance-none cursor-pointer"
            required
          >
            <option value="">Select...</option>
            <option value="commission">Bespoke Commission</option>
            <option value="purchase">Available Work in Gallery</option>
            <option value="general">General Inquiry</option>
            <option value="other">Other</option>
          </select>
        </div>

        <!-- Message Field -->
        <div class="relative">
          <label for="message" class="text-[9px] uppercase tracking-widest text-zinc-400 mb-1 block">
            Message
          </label>
          <textarea
            id="message"
            name="message"
            rows="4"
            class="w-full bg-transparent border-b border-zinc-300 py-3 outline-none focus:border-zinc-800 transition-colors font-light resize-none"
            placeholder="How can I help you?"
            required
          ></textarea>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-center pt-10">
          <button
            type="submit"
            class="bg-ink-dark text-gallery-bone px-14 py-4 text-[10px] uppercase tracking-editorial hover:bg-zinc-700 transition-all duration-300 shadow-sm"
          >
            Send Message
          </button>
        </div>
      </form>

      <!-- Social Footer -->
      <div class="mt-24 pt-12 border-t border-zinc-200/60">
        {profile?.instagramHandle ? (
          <a
            href={`https://instagram.com/${profile.instagramHandle}`}
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-flex flex-col items-center"
          >
            <span class="text-[9px] uppercase tracking-editorial text-zinc-400 mb-2">
              Social
            </span>
            <span class="text-sm font-medium tracking-wide group-hover:text-zinc-500 transition-colors underline underline-offset-8 decoration-zinc-200">
              @{profile.instagramHandle}
            </span>
          </a>
        ) : (
          <div class="text-[9px] uppercase tracking-editorial text-zinc-400">
            Follow the Studio
          </div>
        )}
      </div>

      <!-- Alternative: Direct Email Link -->
      {profile?.email && (
        <div class="mt-8">
          <p class="text-[9px] uppercase tracking-widest text-zinc-400 mb-2">
            Or Email Directly
          </p>
          <a
            href={`mailto:${profile.email}`}
            class="text-sm text-zinc-600 hover:text-zinc-900 transition-colors font-light"
          >
            {profile.email}
          </a>
        </div>
      )}
    </div>
  </main>
</BaseLayout>

<style>
  /* Ensure form inputs and textareas have consistent styling */
  input::placeholder,
  textarea::placeholder {
    color: #a1a1aa;
    opacity: 0.5;
  }

  select {
    cursor: pointer;
    color: #27272A;
  }

  /* Style for default select option */
  select option[value=""] {
    color: #a1a1aa;
  }

  select option {
    background: #F5F2ED;
    color: #27272A;
  }

  /* Remove default select arrow styling */
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2327272A' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.5rem center;
    padding-right: 2rem;
  }
</style>
